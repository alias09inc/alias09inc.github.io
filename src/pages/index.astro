---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime(),
);
---

<Layout title="My Astro Blog">
	<section>
		<h1>最新記事</h1>
		<ul class="post-list">
			{posts.map((post) => (
				<li>
					<a href={`/posts/${post.slug}/`}>
						<h2>{post.data.title}</h2>
						<p>{post.data.description}</p>
						<time datetime={post.data.pubDate.toISOString()}>
							{post.data.pubDate.toLocaleDateString('ja-JP')}
						</time>
					</a>
				</li>
			))}
		</ul>
	</section>
</Layout>

<style>
	h1 {
		margin-bottom: 24px;
	}

	.post-list {
		list-style: none;
		padding: 0;
		display: grid;
		gap: 16px;
	}

	.post-list li {
		background: white;
		border-radius: 12px;
		padding: 20px;
		border: 1px solid #e2e8f0;
		transition: transform 0.2s ease, box-shadow 0.2s ease;
	}

	.post-list li:hover {
		transform: translateY(-2px);
		box-shadow: 0 10px 24px rgba(15, 23, 42, 0.08);
	}

	.post-list h2 {
		margin: 0 0 8px;
		font-size: 1.2rem;
	}

	.post-list p {
		margin: 0 0 12px;
		color: #475569;
	}

	.post-list time {
		font-size: 0.9rem;
		color: #64748b;
	}
</style>
